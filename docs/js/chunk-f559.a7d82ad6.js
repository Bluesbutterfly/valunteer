(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f559"],{"3be5":function(a,t,n){"use strict";n.r(t);var e,o=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("div",{attrs:{id:"list-content"}},[e("div",{staticClass:"sort-search"},[e("van-cell-group",[e("van-search",{attrs:{placeholder:"请输入搜索关键词","show-action":""},on:{search:a.onSearch,cancel:a.onCancels},model:{value:a.value,callback:function(t){a.value=t},expression:"value"}})],1),e("div",{staticClass:"sort-search-contant"},[a._l(a.sortList,function(t,n){return e("div",{staticClass:"search-item",on:{click:function(t){a.sortSearch(n)}}},[a._v("\n        "+a._s(t)+"\n        "),e("i",{staticClass:"iconfont icon-xialajiantou"})])}),a.columnsShow?e("van-picker",{staticClass:"sort-select",attrs:{columns:a.columns,"show-toolbar":""},on:{cancel:a.onCancel,confirm:a.onConfirm}}):a._e()],2)],1),e("van-pull-refresh",{staticClass:"val-loading-contain",on:{refresh:a.onRefresh},model:{value:a.isLoading,callback:function(t){a.isLoading=t},expression:"isLoading"}},[e("van-list",{attrs:{finished:a.finished},on:{load:a.onLoad},model:{value:a.loading,callback:function(t){a.loading=t},expression:"loading"}},a._l(a.list,function(t,n){return e("div",{staticClass:"van-item-list",attrs:{"data-id":t.id},on:{click:function(t){a.details(n)}}},[e("van-cell",{staticClass:"van-commodity-img"},[e("img",{attrs:{src:"http://47.99.140.207:8081/"+t.picture}})]),e("van-cell",{staticClass:"van-commodity-more"},[e("div",{attrs:{title:t.presentation}},[a._v(a._s(t.goodsName))]),e("div",[e("div",[a._v("积分："),e("span",[a._v(a._s(t.price))])]),e("div",[a._v("剩余："),e("span",[a._v(a._s(t.inventory))])])])])],1)}))],1),e("div",{staticClass:"van-listimg-btn",on:{click:a.targetTop}},[e("img",{attrs:{src:n("0750")}})]),e("el-amap",{staticClass:"amap-demo",staticStyle:{display:"none"},attrs:{vid:"amap",plugin:a.plugin,"amap-manager":a.amapManager,center:a.center,zoom:a.zoom}})],1)])},i=[],s=n("88d8"),c=(n("ab71"),n("58e6")),l=(n("0653"),n("34e9")),r=(n("5f5f"),n("f253")),u=(n("5852"),n("d961")),d=(n("5246"),n("6b41")),m=(n("be7f"),n("565f")),p=(n("9cb7"),n("66fd")),h=(n("2994"),n("2bdd")),g=(n("c194"),n("7744")),f=(n("c3a6"),n("ad06")),v=(n("81e6"),n("9ffb")),b=(n("4d48"),n("d1e1")),w=(n("cadf"),n("551c"),n("097d"),n("4328")),C=n.n(w),y=n("2b0e"),M=n("8f9b"),_=n.n(M);n("656e");y["default"].use(_.a);var j=new _.a.AMapManager;_.a.initAMapApiLoader({key:"445aa0fada938fa756d8a9c9e7996531",plugin:["AMap.Autocomplete","AMap.PlaceSearch","AMap.Scale","AMap.OverView","AMap.ToolBar","AMap.MapType","AMap.PolyEditor","AMap.CircleEditor","AMap.Geolocation","AMap.CloudDataSearch","AMap.ToolBar"],uiVersion:"1.0.11"});var k={components:(e={},Object(s["a"])(e,b["a"].name,b["a"]),Object(s["a"])(e,v["a"].name,v["a"]),Object(s["a"])(e,f["a"].name,f["a"]),Object(s["a"])(e,g["a"].name,g["a"]),Object(s["a"])(e,h["a"].name,h["a"]),Object(s["a"])(e,p["a"].name,p["a"]),Object(s["a"])(e,m["a"].name,m["a"]),Object(s["a"])(e,d["a"].name,d["a"]),Object(s["a"])(e,u["a"].name,u["a"]),Object(s["a"])(e,r["a"].name,r["a"]),Object(s["a"])(e,l["a"].name,l["a"]),Object(s["a"])(e,c["a"].name,c["a"]),e),data:function(){var a=this;return{list:[],value:"",zoom:15,loading:!1,finished:!1,isLoading:!1,rows:6,pageNumber:1,totalPage:0,columns:[],columnsShow:!1,sortList:["分类","附近","排序"],center:[121.59996,31.197646],lng:null,lat:null,categoryId:null,amapManager:j,loaded:!1,plugin:[{pName:"Geolocation",events:{init:function(t){t.getCurrentPosition(function(t,n){console.log(t),n&&n.position?(a.lng=n.position.lng,a.lat=n.position.lat,a.center=[a.lng,a.lat],a.loaded=!0,a.$nextTick()):alert("定位失败")})}}}]}},methods:{init:function(a){var t=this,n=(this.pageNumber,this);this.$axios.post("/api/goods/goodsList",C.a.stringify({page:n.pageNumber,rows:this.rows,pushObj:a})).then(function(a){var e=a.data.resData,o=e.goodsList;n.list=o,n.totalPage=a.data.resData.count/t.rows,n.isLoading=!1})},onRefresh:function(){var a=this;setTimeout(function(){a.totalPage=0,a.pageNumber=0,a.init()},500)},onLoad:function(){var a=this,t=this;setTimeout(function(){t.pageNumber;a.$axios.post("/api/goods/goodsList",C.a.stringify({page:t.pageNumber,rows:a.rows})).then(function(n){console.log(n);var e=n.data.resData,o=e.goodsList;t.list=t.list.concat(o),t.totalPage=n.data.resData.count/a.rows,t.loading=!1,t.pageNumber++,t.pageNumber-1>=Math.ceil(t.totalPage)&&(t.finished=!0)})},500)},details:function(a){sessionStorage.shopIndexId=this.list[a].id,sessionStorage.shopPic="http://47.99.140.207:8081/"+this.list[a].picture,this.$router.push({name:"commodityDetails",query:this.list[a].id})},targetTop:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},sortSearch:function(a){var t=this;console.log(this.lat),this.columnsShow=!0;var n=["不限","1公里","3公里","5公里","10公里","20公里"],e=["不限","距离","积分"];this.$axios.post("/api/shop/category").then(function(o){console.log(o);var i=[];for(var s in t.columns=[],o.data.resData)t.categoryId=o.data.resData[s].id,i.push(o.data.resData[s].categoryName);switch(a){case 0:t.columns=i;break;case 1:t.columns=n;break;case 2:t.columns=e;break}})},onConfirm:function(a,t){self.list=[];var n={name:a,lat:this.lat,lng:this.lng};this.init(n),this.columnsShow=!1},onCancel:function(){this.columnsShow=!1},onSearch:function(){self.list=[];var a={name:this.value,lat:this.lat,lng:this.lng};this.init(a)},onCancels:function(){return!1}},mounted:function(){var a=document.documentElement.clientHeight;document.getElementById("list-content").style.height=a-46+"px"}},A=k,O=(n("b24e"),n("2877")),S=Object(O["a"])(A,o,i,!1,null,"c3dbf7c0",null);S.options.__file="index.vue";t["default"]=S.exports},"839b":function(a,t,n){},b24e:function(a,t,n){"use strict";var e=n("839b"),o=n.n(e);o.a}}]);
//# sourceMappingURL=chunk-f559.a7d82ad6.js.map