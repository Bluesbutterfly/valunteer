(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49f1"],{"8b5d":function(a,t,e){"use strict";e.r(t);var n,o=function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",[n("div",{attrs:{id:"list-content"}},[n("div",{staticClass:"sort-search"},[n("van-cell-group",[n("van-search",{attrs:{placeholder:"请输入搜索关键词","show-action":""},on:{search:a.onSearch,cancel:a.onCancels},model:{value:a.value,callback:function(t){a.value=t},expression:"value"}})],1),n("div",{staticClass:"sort-search-contant"},[a._l(a.sortList,function(t,e){return n("div",{staticClass:"search-item",on:{click:function(t){a.sortSearch(e)}}},[a._v("\n        "+a._s(t)+"\n        "),n("i",{staticClass:"iconfont icon-xialajiantou"})])}),a.columnsShow?n("van-picker",{staticClass:"sort-select",attrs:{columns:a.columns,"show-toolbar":""},on:{cancel:a.onCancel,confirm:a.onConfirm}}):a._e()],2)],1),n("van-pull-refresh",{staticClass:"val-loading-contain",on:{refresh:a.onRefresh},model:{value:a.isLoading,callback:function(t){a.isLoading=t},expression:"isLoading"}},[n("van-list",{attrs:{finished:a.finished},on:{load:a.onLoad},model:{value:a.loading,callback:function(t){a.loading=t},expression:"loading"}},a._l(a.list,function(t,e){return n("div",{staticClass:"van-item-list",attrs:{"data-id":t.id},on:{click:function(t){a.details(e)}}},[n("van-cell",{staticClass:"van-commodity-img"},[n("img",{attrs:{src:"http://47.99.140.207:8081/"+t.picture}})]),n("van-cell",{staticClass:"van-commodity-more"},[n("div",{attrs:{title:t.presentation}},[a._v(a._s(t.goodsName))]),n("div",[n("div",[a._v("商户名称："),n("span",[a._v(a._s(t.shopName))])]),n("div",{attrs:{title:t.presentation}},[a._v(a._s(t.presentation))])])])],1)}))],1),n("div",{staticClass:"van-listimg-btn",on:{click:a.targetTop}},[n("img",{attrs:{src:e("0750")}})]),n("el-amap",{staticClass:"amap-demo",staticStyle:{display:"none"},attrs:{vid:"amap",plugin:a.plugin,"amap-manager":a.amapManager,center:a.center,zoom:a.zoom}})],1)])},s=[],i=e("88d8"),c=(e("ab71"),e("58e6")),l=(e("0653"),e("34e9")),r=(e("5f5f"),e("f253")),u=(e("5852"),e("d961")),d=(e("5246"),e("6b41")),p=(e("be7f"),e("565f")),m=(e("9cb7"),e("66fd")),h=(e("2994"),e("2bdd")),g=(e("c194"),e("7744")),f=(e("c3a6"),e("ad06")),v=(e("81e6"),e("9ffb")),b=(e("4d48"),e("d1e1")),w=e("4328"),C=e.n(w),M=e("2b0e"),y=e("8f9b"),_=e.n(y);e("656e");M["default"].use(_.a);var j=new _.a.AMapManager;_.a.initAMapApiLoader({key:"445aa0fada938fa756d8a9c9e7996531",plugin:["AMap.Autocomplete","AMap.PlaceSearch","AMap.Scale","AMap.OverView","AMap.ToolBar","AMap.MapType","AMap.PolyEditor","AMap.CircleEditor","AMap.Geolocation","AMap.CloudDataSearch","AMap.ToolBar"],uiVersion:"1.0.11"});var k={components:(n={},Object(i["a"])(n,b["a"].name,b["a"]),Object(i["a"])(n,v["a"].name,v["a"]),Object(i["a"])(n,f["a"].name,f["a"]),Object(i["a"])(n,g["a"].name,g["a"]),Object(i["a"])(n,h["a"].name,h["a"]),Object(i["a"])(n,m["a"].name,m["a"]),Object(i["a"])(n,p["a"].name,p["a"]),Object(i["a"])(n,d["a"].name,d["a"]),Object(i["a"])(n,u["a"].name,u["a"]),Object(i["a"])(n,r["a"].name,r["a"]),Object(i["a"])(n,l["a"].name,l["a"]),Object(i["a"])(n,c["a"].name,c["a"]),n),data:function(){var a=this;return{list:[],value:"",zoom:15,order:0,loading:!1,finished:!1,isLoading:!1,rows:6,pageNumber:1,totalPage:0,columns:[],columnsShow:!1,sortList:["分类","附近","排序"],center:[121.59996,31.197646],lng:null,lat:null,categoryId:null,amapManager:j,loaded:!1,plugin:[{pName:"Geolocation",events:{init:function(t){t.getCurrentPosition(function(t,e){console.log(t),e&&e.position?(a.lng=e.position.lng,a.lat=e.position.lat,a.center=[a.lng,a.lat],a.loaded=!0,a.$nextTick()):alert("定位失败")})}}}]}},methods:{init:function(a){var t=this,e=(this.pageNumber,this);this.$axios.post("/api/shop/shopList",C.a.stringify({page:e.pageNumber,rows:this.rows,pushObj:a})).then(function(a){var n=a.data.resData,o=n.shopList;e.list=o,e.totalPage=a.data.resData.count/t.rows,e.isLoading=!1})},onRefresh:function(){var a=this;setTimeout(function(){a.totalPage=0,a.pageNumber=0,a.init()},500)},onLoad:function(){var a=this,t=this;setTimeout(function(){t.pageNumber;a.$axios.post("/api/shop/shopList",C.a.stringify({page:t.pageNumber,rows:a.rows})).then(function(e){console.log(e);var n=e.data.resData,o=n.shopList;t.list=t.list.concat(o),t.totalPage=e.data.resData.count/a.rows,t.loading=!1,t.pageNumber++,t.pageNumber-1>=Math.ceil(t.totalPage)&&(t.finished=!0)})},500)},details:function(a){sessionStorage.shopIndexId=this.list[a].id,sessionStorage.shopPic="http://47.99.140.207:8081/"+this.list[a].picture,this.$router.push({name:"shopList",query:this.list[a].id})},targetTop:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},sortSearch:function(a){var t=this;console.log(this.lat),this.columnsShow=!0;var e=["不限","1公里","3公里","5公里","10公里","20公里"],n=["不限","距离","积分"];this.$axios.post("/api/shop/category").then(function(o){console.log(o);var s=[];for(var i in t.columns=[],o.data.resData)t.categoryId=o.data.resData[i].id,s.push(o.data.resData[i].categoryName);switch(a){case 0:t.columns=s;break;case 1:t.columns=e;break;case 2:t.columns=n;break}})},onConfirm:function(a,t){self.list=[];var e={name:a,order:this.order,lat:this.lat,lng:this.lng};this.init(e),this.columnsShow=!1},onCancel:function(){this.columnsShow=!1},onSearch:function(){self.list=[];var a={name:this.value,lat:this.lat,lng:this.lng};this.init(a)},onCancels:function(){return!1}},mounted:function(){var a=document.documentElement.clientHeight;document.getElementById("list-content").style.height=a-46+"px"}},A=k,L=(e("dd18"),e("2877")),O=Object(L["a"])(A,o,s,!1,null,"b8706c9a",null);O.options.__file="index.vue";t["default"]=O.exports},b4eb:function(a,t,e){},dd18:function(a,t,e){"use strict";var n=e("b4eb"),o=e.n(n);o.a}}]);
//# sourceMappingURL=chunk-49f1.10a330c1.js.map